%
% "Refining from the BON High-level Specification Language to the
% VHDL Hardware Description Language" for UNKNOWN09.
% Joseph R. Kiniry, Dragan Stosic
% $Id: paper.tex 2795 2007-09-23 19:35:53Z dmz $
%

\documentclass{article} 
\usepackage{times}

\usepackage{ifpdf}
\usepackage{a4wide}
\usepackage{pdfsync}

\ifpdf
\usepackage[pdftex]{graphicx}
\else
\usepackage{graphicx}
\fi

%\usepackage{todonotes}

% \usepackage{html}
% \usepackage{url}
\usepackage{xspace}
%\usepackage{doublespace}
\usepackage{tabularx}
\usepackage{epsfig}
\usepackage{amsmath}
\usepackage{amsfonts}
\usepackage{amssymb}
\usepackage{eucal}
\usepackage{stmaryrd}
% \ifpdf
% \usepackage[centredisplay]{diagrams}
% \else
% \usepackage[centredisplay,PostScript=dvips]{diagrams}
% \fi
\usepackage{float}

\ifpdf
\usepackage[pdftex,bookmarks=false,a4paper=false,
            plainpages=false,naturalnames=true,
            colorlinks=true,pdfstartview=FitV,
            linkcolor=blue,citecolor=blue,urlcolor=blue,
            pdfauthor="Joseph R. Kiniry and Dragan Stosic"]{hyperref}
\else
\usepackage[dvips,linkcolor=blue,citecolor=blue,urlcolor=blue]{hyperref}
\fi

\newcommand{\tablesize}{\footnotesize}
\newcommand{\eg}{e.g.,\xspace}
\newcommand{\ie}{i.e.,\xspace}
\newcommand{\etc}{etc.\xspace}
\newcommand{\myhref}[2]{\ifpdf\href{#1}{#2}\else\htmladdnormallinkfoot{#2}{#1}\fi}
%\newcommand{\myhref}[2]{\emph{#2}}
\newcommand{\todo}{\textbf{TODO:}}
\newcommand{\ST}{\emph{SenseTile}\xspace}
\newcommand{\STs}{\emph{SenseTiles}\xspace}
\newcommand{\STS}{\emph{SenseTile Simulator}\xspace}
\newcommand{\datastore}{\STs Scientific Datastore\xspace}
\newcommand{\computefarm}{The \STs Scientific Compute Farm\xspace}
\newcommand{\computefarmlong}{UCD CASL \STs Software and Data Compute Server Farm\xspace}
\newcommand{\sensorfarm}{The \STs\xspace}
\newcommand{\Sc}{\emph{system\_chart}\xspace}
\newcommand{\Clc}{\emph{cluster\_chart}\xspace}
\newcommand{\Csc}{\emph{class\_chart}\xspace}
\newcommand{\Ft}{\emph{feature}\xspace}
\newcommand{\ent}{\emph{entity}\xspace}
\newcommand{\arch}{\emph{architecture}\xspace}
\newcommand{\archs}{\emph{architectures}\xspace}
\newcommand{\duc}{\emph{design units collection}\xspace}
\newcommand{\ducs}{\emph{design units collections}\xspace}
\newcommand{\du}{\emph{design unit}\xspace}
%---------------------------------------------------------------------
% New commands, macros, \etc
%---------------------------------------------------------------------

%% \input{kt}

%=====================================================================

\begin{document}

\title{Refining from the BON High-level Specification Language to the
  VHDL-AMS Hardware Description Language}

\author{Joseph R. Kiniry and Dragan Stosic\\
UCD CASL: Complex and Adaptive Systems Laboratory and\\
School of Computer Science and Informatics,\\
University College Dublin,\\
Belfield, Dublin 4, Ireland,\\
kiniry@acm.org and dragan.stosic@gmail.com\\
}

\maketitle

%======================================================================
%\thispagestyle{empty}
\begin{abstract}
  
The \textbf{UCD CASL SenseTile System} is a large-scale, general-purpose
sensor system installed at the University College Dublin in Dublin,
Ireland.  \textbf{Our facility provides a capability---unique in the world in
terms of its scale and flexibility---for performing in-depth
investigation of both the specific and general issues in large-scale
sensor networking.}

This system integrates a sensor platform, a datastore, and a compute
farm.  The sensor platform is a custom-designed, but inexpensive,
sensor platform (called the \ST) paired with general-purpose
small-scale compute nodes, including everything from low-power PDAs to
powerful touchscreen-based portable computers.  The datastore is a
multi-terabyte scale scientific datastore into which sensor data
flows, and in which online and offline scientific computation of
sensor and other scientific data takes place.  The compute farm is a
large-scale Linux, Solaris, and OS~X-based compute farm used by
scientists for these online and offline scientific computations.

The \STs, as an embedded system, have several unusual built-in sensors 
and emitters, sensor nodes can be extended via a general-purpose USB bus, 
and \STs contain an FPGA that is dynamically updated on a per-experiment 
basis.  \STs are custom-designed in VHDL and VHDL-AMS.  Like many hardware-based systems,
 to write new software for or against the \ST architecture one either uses
the actual hardware or one runs a \STS.  But this simulator emulates a
piece of hardware, one would like to know if the simulator
\emph{actually} simulates the hardware.  We have developed an approach
through which we refine the VHDL specification up to the formal BON
specification language, and from this specification we generate an
executable, functional model-based specification in the JML language.
We have used this specification to implement a fully validated and
verified \ST simulator.

\end{abstract}

%======================================================================
\section{Introduction}
The \STs, represents heterogeneous collection of digital, analog 
and mixed signal hardware components. Embedded system complexity 
requires the need to strive for formal descriptions each component 
separatelly in order to produce specification of the \STs simulator. 
The development of complex system requires sophisticated tool and methodology 
in order to be able to complete a correct design in time.  

The authors will illustrate in this paper how BON can represent a high 
level analogue mapping and will further illustrate a procedure for 
transformation from BON to VHDL-AMS. As an extremly simple example, 
we will give practical aspect of refinement from BON to VHDL-AMS,
applied on A/D convertor, in order to produce formal specification 
and software simulation.
%=====================================================================


\section{VHDL-AMS}
IEEE VHDL-AMS 1076.1 is the industry standard mixed-signal 
high-level description language for electronic and multi-domain 
systems. VHDL-AMS, as an superset of VHDL, supports modeling and 
simulation of analog and mixed-signal systems. The main contribution 
of VHDL-AMS is ability to describe the behavior of complex system 
trought differential and algebraic equations (DAEs). For this purpose, 
VHDL-AMS introduces the following capabilities and therms:

\begin{itemize}
\item 
\emph{Terminals} represents phisical connection points or circuit nodes 
of a network connectivity. Terminals are declared to be of various 
\emph{natures}, which represent different energy domains of a system.
\item
The \emph{simultaneous statements} creates one or more characteristic 
equations that are used by the "analog solver" to model continuously 
valued behaviour.  
\item
The \emph{quantities} denote a waveform or a time series of values.
The behaviour of the \emph{quantities} is given by the \emph{simultaneous
 statements}. They take values as a result of solving the set of simultaneous 
ordinary differential and algebraic equations (DAEs). To simplify, 
quantities can be understood as analog unknowns of (DAEs) that specify 
analog behavior. 
\item
The \emph{break statement} is an construct which allows to 
initialize the DAE system at the beginning of a transient 
simulation and to mark discontinuities during such a transient 
simulation.

\end{itemize} 
 
\section{Choice of BON as the modeling tool}
%Brief description and motivation.
The Business Object Notation (BON) is an analysis and design notation 
for object-oriented systems  which emphasizes \emph{seamlessness}, 
\emph{reversibility} and software \emph{contracting}. Let us define 
these principles precisely and point out why the principles are 
important in VHDL-AMS simulation.
%\todo{dragan 25/07/2009 - Figure out relation: Seamlessness and VHDL-AMS}
\begin{itemize}
\item \emph{Seamlessness} is the use of a continuous process 
throughout the software lifecycle.
%\todo{dragan 25/07/2009 - Figure out relation: Reversibility and VHDL-AMS. Why is Reversibility important in VHDL design.}
\item \emph{Reversibility} is the support for both forward and 
backward development process: from analysis to design 
and implementation, and back.
In VHDL-AMS, modelling represents an continious top-down-bottom-up
process. Top-down approach serves for design while bottom-up
serves for verification. The possibility of seamlessly translating 
changes made during a certain development phase back into earlier phases,
facilitates a stable and predictable environment and ensures the various 
models consistent with the code.
\item \emph{Contracting} is the precise definition, for each software element, 
of the associated semantic properties. BON use a full assertion mechanism, 
allowing analysts to specify not only the structure of a system but also its
semantics ( constraints and invariants of the expected results ).
\end{itemize}

Therefore as an approach of best modelling practices, and as the notation 
based on contract design and refinement calculus, BON is the obvious choice 
for the our simulator.
Throughout this paper we will try to make this clear.  
\section{Refinement from BON to VHDL-AMS}

\subsection{Mapping between BON and VHDL-AMS}
%\todo{dragan 27/07/2009 - Figure out : Mapping from BON  to entity/architecture structure in VHDL-ASM.}
\begin{itemize}
\item \Sc: VHDL-AMS allows hierarchical structure modeling, 
meaning that subsistems ( \ducs ), can be developed independently.
As an top-level description (informal/formal), \Sc connect all the \ducs
together to a complete design. 
\item \Clc: An  subsistem which represent \duc.
\item \Csc: describes \du. It can be identify with the primary unit (\ent) and secondary 
unit (\arch) structure in VHDL-AMS.
The \Csc's name corresponds to the name of the entity in VHDL-AMS.
\item \Ft: The feature section of the \Csc, where the mathematical 
transfer function of the component is entered, holds the same information 
as the \arch section of the VHDL-AMS.
\end{itemize}
An VHDL-AMS component are described using an \ent-\arch structure. 
The component model contains an \ent and one or more \archs. 
The \ent specifies the interface of the model to the outside world. 
In other words, \ent introduces a name, list of input/output ports 
and the definition of the generic parameters. The textual 
presentation of \ent is shown in Figure.1. 
\input{adc-entity}
 
The \arch body represents description of the internal implementation 
of an \ent including only process statements, which are collections 
of actions to be executed in sequence, or simultaneous statements, 
which describe equations of analogue system behaviour. 
The textual presentation of \arch is shown in Figure.2.
\input{adc-arch}
 
%\todo{dragan 27/07/2009 - Start with:1) BON charts and diagrams.}


%=====================================================================
\section{Conclusion}

A conclusion.

%======================================================================
%% \nocite{ex1,ex2}
\bibliographystyle{plain}
\bibliography{extra,%
              abbrev,%
              ads,%
              category,%
              complexity,%
              hypertext,%
              icsr,%
              knowledge,%
              languages,%
              linguistics,%
              meta,%
              metrics,%
              misc,%
              modeling,%
              modeltheory,%
              reuse,%
              rewriting,%
              softeng,%
              specification,%
              ssr,%
              technology,%
              theory,%
              web,%
              upcoming,%
              upcoming_conferences,%
              conferences,%
              workshops,%
              verification,%
              escjava,%
              jml,%
              nijmegen}

%======================================================================
% Fin

\end{document}

%%% Local Variables: 
%%% mode: latex
%%% eval: 
%%% TeX-master: t
%%% End: 
